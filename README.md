# 68k → WASM JIT Compiler

**고정밀 사이클 정확도의 고성능 68020 에뮬레이터**

Motorola 68020 바이너리를 런타임에 WebAssembly로 변환하여 실행하는 사이클 정확 에뮬레이터.

## 프로젝트 목표

**최우선 목표**: **Motorola 68020 전체 스펙 100% 구현**

1. **68020 완전 구현** (최최우선)
   - 모든 명령어 (100개+ 명령어, 모든 변형)
   - 모든 어드레싱 모드 (18가지 EA 모드)
   - 모든 예외 처리
   - 특권/사용자 모드
   - 모든 시스템 레지스터

2. **사이클 정확도** (최우선)
   - 모든 명령어의 정확한 실행 시간 (사이클 단위)
   - 68020 공식 스펙 준수
   - EA 모드 사이클 포함

3. **고성능** (중요)
   - WASM JIT 컴파일을 통한 네이티브의 80-95% 성능
   - 사이클 정확도를 유지하면서

**중요**: 68000이 아닌 68020, "거의 완전"이 아닌 100% 완전 구현이 목표!

## 왜 JIT 방식인가?

기존 인터프리터 방식은 느리고, 정적 컴파일은 Zig 컴파일 타임이 병목.  
→ **런타임 JIT**로 즉시 변환 + 브라우저 JIT로 네이티브 수준 성능 달성!

## 구조

```
68k Binary (ROM/Executable)
    ↓
[JIT Compiler]
 - Decode 68k instructions
 - Translate to WASM bytecode
 - Generate WASM module
    ↓
WASM Module (동적 생성)
    ↓
Browser JIT (V8/SpiderMonkey)
    ↓
Native Execution (x86_64/ARM64)
```

## 핵심 아이디어

### ❌ 기존 방식 (느림)
```
68k source → Zig 컴파일 → 네이티브
           (컴파일 타임 병목)
```

### ✅ 새 방식 (빠름)
```
68k binary → 런타임 JIT → WASM → 브라우저 JIT → 네이티브
           (즉시 실행)
```

## 성능 목표

- **사이클 정확도**: 각 명령어의 정확한 사이클 카운트 (68020 스펙 준수)
- **컴파일 속도**: 1MB 68k 바이너리를 0.1초 이내에 WASM 변환
- **실행 속도**: 네이티브의 80-95%
- **메모리**: 원본 68k 바이너리의 2-3배

## 상태

🚧 **개발 중** - 2026-02-12 시작

---

**작성자**: 김서방  
**목적**: Zig 컴파일 병목 해결
